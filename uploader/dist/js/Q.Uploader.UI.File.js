//devin87@qq.com
//build:2022/01/07 10:47:04
!function(){"use strict";var n=Q.def,v=Q.getFirst,o=Q.getLast,u=Q.getNext,r=Q.createEle,p=Q.formatSize,m=Q.event.add,h=Q.Uploader,f=h.Lang;function i(e,i){e.className+=" "+i}function g(e,i){e&&(e.innerHTML=i||"")}h.UI.File={init:function(){var e=this.ops.view;e&&i(e,"ui-file "+(this.html5?"html5":"html4"))},draw:function(e){var i,s,a,t,d=this,l=d.ops,c=l.view;c&&(i=l.button||{},t=n(f.cancel||i.cancel,"取消"),l=n(f.remove||i.remove,"删除"),i=e.name,s=e.id,(a=r("div","u-item",'<div class="fl"><div class="u-name" title="'+i+'">'+i+'</div></div><div class="fr"><div class="u-size"></div><div class="u-speed">--/s</div><div class="u-progress-bar"><div class="u-progress" style="width:1%;"></div></div><div class="u-detail">0%</div><div class="u-state"></div><div class="u-op"><a class="u-op-cancel">'+t+'</a><a class="u-op-remove">'+l+'</a></div></div><div class="clear"></div>')).taskId=s,e.box=a,c.appendChild(a),t=o(a.childNodes[1]),l=v(t),t=o(t),m(l,"click",function(){d.cancel(s)}),m(t,"click",function(){d.remove(s),c.removeChild(a)}),d.update(e))},update:function(e){var i,s,a,t,d,l,c,n,o;e&&e.box&&(i=e.total||e.size,s=e.loaded,a=e.state,c=e.box.childNodes[1],t=v(c),d=u(t),o=u(d),l=v(o),c=u(o),g(o=u(c),h.getStatusText(a)),o.title=e.message||"",i<0||(o="",this.html5&&null!=s&&0<=s&&(a==h.PROCESSING?"100.0"==(n=Math.min(100*s/i,100).toFixed(1))&&(n="99.9"):a==h.COMPLETE&&(n="100"),n&&g(c,l.style.width=n+="%"),o='<span class="u-loaded">'+p(s)+"</span> / ",e=e.avgSpeed||e.speed,g(d,p(e)+"/s")),g(t,o+='<span class="u-total">'+p(i)+"</span>")))},over:function(e){e&&e.box&&i(e.box,"u-over")}},h.extend(h.UI.File)}(window);